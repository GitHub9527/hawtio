<!--
  ~ Copyright 2012 Red Hat, Inc.
  ~
  ~ Red Hat licenses this file to you under the Apache License, version
  ~ 2.0 (the "License"); you may not use this file except in compliance
  ~ with the License.  You may obtain a copy of the License at
  ~
  ~   http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
  ~ implied.  See the License for the specific language governing
  ~ permissions and limitations under the License.
  -->

<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0">

  <reference id="commandProcessor" interface="org.apache.felix.service.command.CommandProcessor" availability="mandatory"/>

  <bean id="commandProcessorHolder" class="io.hawt.web.plugin.karaf.terminal.CommandProcessorHolder">
    <property name="commandProcessor" ref="commandProcessor" />
  </bean>

  <reference id="threadIO" interface="org.apache.felix.service.threadio.ThreadIO" availability="mandatory"/>

  <bean id="threadIOHolder" class="io.hawt.web.plugin.karaf.terminal.ThreadIOHolder">
    <property name="threadIO" ref="threadIO" />
  </bean>

  <bean id="plugin" class="io.hawt.web.plugin.HawtioPlugin" init-method="init" destroy-method="destroy">
    <property name="name" value="${plugin-name}"/>
    <property name="context" value="${plugin-context}"/>
    <property name="domain" value="${plugin-domain}"/>
    <property name="scripts" value="${plugin-scripts}"/>
  </bean>

</blueprint>
